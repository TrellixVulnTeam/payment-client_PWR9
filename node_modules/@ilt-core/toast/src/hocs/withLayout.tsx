import React from 'react';

import {
  CloseIcon,
  InfoIcon,
  SuccessIcon,
  DangerIcon,
  WarningIcon,
} from '../components/icons';
import { IconType, ToastType } from '../types';
import styles from '../styles/styles.module.scss';

const iconsByType = new Map<ToastType, IconType>();
[
  {
    type: ToastType.INFO,
    component: InfoIcon,
    title: 'Info',
  },
  {
    type: ToastType.SUCCESS,
    component: SuccessIcon,
    title: 'Success',
  },
  {
    type: ToastType.ERROR,
    component: DangerIcon,
    title: 'Error',
  },
  {
    type: ToastType.WARNING,
    component: WarningIcon,
    title: 'Warning',
  },
].map((item) => iconsByType.set(item.type, item));

const getIconByType = (type: ToastType) => {
  if (iconsByType.has(type)) return iconsByType.get(type);
  return iconsByType.get(ToastType.INFO);
};

const withLayout =
  (MainComponent: React.ComponentType<any>, type: ToastType) =>
  (props: any) => {
    const icon = getIconByType(type);

    return (
      <>
        <div className={styles.message_icon}>{icon && <icon.component />}</div>

        <MainComponent {...props} />

        <div className={styles.close_icon}>
          <CloseIcon />
        </div>
      </>
    );
  };

export default withLayout;
